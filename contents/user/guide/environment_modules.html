<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Environment modules &mdash; Ixtlilton 0+untagged.76.g63f39e0.dirty documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Conda" href="conda.html" />
    <link rel="prev" title="Shell aliases" href="shell_aliases.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Ixtlilton
          </a>
              <div class="version">
                0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/main_node.html">Main node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/secondary_nodes.html">Secondary nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/storage_node.html">Storage node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/networks.html">Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/file_system.html">File system</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/file_system.html#the-ixtlilton-s-file-system">The Ixtlilton’s file system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/file_system.html#sharing-projects-data">Sharing projects data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/file_system.html#finished-projects">Finished projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/file_system.html#a-slave-node-file-system">A slave node file system.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/file_system.html#the-user-file-system">The user file system</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/users_and_groups.html">Users and groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/environment_modules.html">Environment modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/environment_modules.html#what-is-an-environment-module-system">What is an environment module system?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/environment_modules.html#lmod">Lmod</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/environment_modules.html#your-own-environment-modules">Your own environment modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/queuing_system.html">Queuing system</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="login.html">Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="transfer_files.html">Transfer files</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_file_system.html">File system</a></li>
<li class="toctree-l2"><a class="reference internal" href="dot_files_and_directories.html">Dot files and directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment_variables.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell_aliases.html">Shell aliases</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Environment modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="conda.html">Conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="git.html">Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="jupyter.html">Jupyter</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm.html">SLURM jobs submission</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflow_UIBCDF.html">UIBCDF project’s workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/x.html">XXX</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Admin Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin/guide/index.html">Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/admin_and_monitoring.html">Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/hardware.html">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/network.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/volumes_and_file_system.html">Volumes and File System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/users_and_groups.html">Users and Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/ssh.html">SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/environment_modules.html">Environment Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/guide/conda.html">Conda</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/tools/index.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../admin/tools/x.html">XXX</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../autosummary/ixtlilton_tools.html">ixtlilton_tools</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Ixtlilton</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Guide</a></li>
      <li class="breadcrumb-item active">Environment modules</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
             
  <section id="environment-modules">
<h1>Environment modules<a class="headerlink" href="#environment-modules" title="Permalink to this heading"></a></h1>
<section id="what-is-an-environment-module-system">
<h2>What is an environment module system?<a class="headerlink" href="#what-is-an-environment-module-system" title="Permalink to this heading"></a></h2>
<p>An HPC cluster needs to be used by different users with different needs.
With this in mind, installing the scientific software in the OS is not functional.
Some times different versions of the same software is needed. Some times the software required has
dependencies with compatibility issues. In this sceneario, having an environment modules manager is highly
recommended. This is one of the best ways to dinamically change the users environment
(environmental variables such as binary paths, library paths, etc).</p>
</section>
<section id="lmod">
<h2>Lmod<a class="headerlink" href="#lmod" title="Permalink to this heading"></a></h2>
<p>To work with environment modules, Ixtlilton operates with <a class="reference external" href="http://lmod.readthedocs.org">Lmod</a>. As user, in principle you only need
to know how to check the modules available for you, and how to load and unload them.</p>
<section id="listing-the-available-modules">
<h3>Listing the available modules<a class="headerlink" href="#listing-the-available-modules" title="Permalink to this heading"></a></h3>
<p>The following command shows the list of modules available for you to be used:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>avail
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>spider
</pre></div>
</div>
<p>Notice that modules are located in different places. Those in ‘/opt/modulefiles’ and
‘/opt2/modulefiles’ are managed by the cluster administrators. The modules you can find there
correspond to already compiled software that you can already load. As you will see at the end of
this document, your user can also define modules locally and only available for you.</p>
</section>
<section id="looking-for-a-module">
<h3>Looking for a module<a class="headerlink" href="#looking-for-a-module" title="Permalink to this heading"></a></h3>
<p>Modules can be located with a keyword. Let’s try to look for the modules related with
CUDA:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>keyword<span class="w"> </span>CUDA
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>spider<span class="w"> </span>CUDA
</pre></div>
</div>
</section>
<section id="loading-modules">
<h3>Loading modules<a class="headerlink" href="#loading-modules" title="Permalink to this heading"></a></h3>
<p>To load a module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>gromacs/intel-2018_mkl_2019.1
</pre></div>
</div>
<p>Some modules depend on others. Lmod usually handle this without out disturbing the user. If this is
not the case, a message like this one will be returned with information of the modules the user
needs to load as dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Lmod<span class="w"> </span>has<span class="w"> </span>detected<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>error:<span class="w">  </span>Cannot<span class="w"> </span>load<span class="w"> </span>module<span class="w"> </span><span class="s2">&quot;gromacs/intel-2018_mkl_2019.1&quot;</span>.<span class="w"> </span>At<span class="w"> </span>least<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>these<span class="w"> </span>module<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>loaded:
<span class="w">   </span>gcc/6.4.0<span class="w"> </span>intel/compilers_and_libraries/2018<span class="w"> </span>intel/mpi/2018<span class="w"> </span>cmake/intel-2018_3.13.4<span class="w"> </span>CUDA/intel-2018_10.0

While<span class="w"> </span>processing<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>module<span class="o">(</span>s<span class="o">)</span>:
<span class="w">    </span>Module<span class="w"> </span>fullname<span class="w">                </span>Module<span class="w"> </span>Filename
<span class="w">    </span>---------------<span class="w">                </span>---------------
<span class="w">    </span>gromacs/intel-2018_mkl_2019.1<span class="w">  </span>/opt2/modulefiles/gromacs/intel-2018_mkl_2019.1
</pre></div>
</div>
<p>In this case, the message warns about three dependencies. This can be solved this way:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>gcc/6.4.0<span class="w"> </span>intel/compilers_and_libraries/2018<span class="w"> </span>intel/mpi/2018<span class="w"> </span>cmake/intel-2018_3.13.4<span class="w"> </span>CUDA/intel-2018_10.0<span class="w"> </span>gromacs/intel-2018_mkl_2019.1
</pre></div>
</div>
<p>But Lmod can be configured to load automatically these dependencies. Ask the administrators to
improve the loading process of a specific module if you find this kind of problems.</p>
</section>
<section id="showing-loaded-modules">
<h3>Showing loaded modules<a class="headerlink" href="#showing-loaded-modules" title="Permalink to this heading"></a></h3>
<p>To show the loaded modules:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>list
</pre></div>
</div>
</section>
<section id="unloading-modules">
<h3>Unloading modules<a class="headerlink" href="#unloading-modules" title="Permalink to this heading"></a></h3>
<p>To unload a module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>unload<span class="w"> </span>gromacs/intel-2018_mkl_2019.1
</pre></div>
</div>
<p>Notice that the module loaded as dependencies will be also unloaded -if they were loaded
automatically-.</p>
<p>If all loaded modules need to be unloaded at once, you can type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>purge
</pre></div>
</div>
</section>
<section id="default-modules">
<h3>Default modules<a class="headerlink" href="#default-modules" title="Permalink to this heading"></a></h3>
<p>Module names are long. When a program was compiled in different flavors (version, compilation
options, etc) this is specified in the name. For example, you can find gromacs in at least two
versions in the output of <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-----------<span class="w"> </span>/opt2/modulefiles<span class="w"> </span>-------------
<span class="w">   </span>gromacs/gcc-4.8.5_ownfftw_2019.1<span class="w"> </span><span class="o">(</span>D<span class="o">)</span>
<span class="w">   </span>gromacs/gcc-6.4.0_ownfftw_2019.1<span class="w">  </span>
</pre></div>
</div>
<p>When this happens, there is always a module marked with “(D)”. This is default module. If only the
name of the family of modules, in this case ‘gromacs’ is invoked as argument of <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>gromacs
</pre></div>
</div>
<p>the default module is loaded:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>list


Currently<span class="w"> </span>Loaded<span class="w"> </span>Modules:
<span class="w">  </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>CUDA/gcc-4.8.5_10.0<span class="w">   </span><span class="m">2</span><span class="o">)</span><span class="w"> </span>cmake/gcc-4.8.5_3.13.4<span class="w">   </span><span class="m">3</span><span class="o">)</span><span class="w"> </span>openmpi/gcc-4.8.5_CUDA-10.0_4.0.0<span class="w">   </span><span class="m">4</span><span class="o">)</span><span class="w"> </span>gromacs/gcc-4.8.5_ownfftw_2019.1
</pre></div>
</div>
<p>Try now to unload it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>unload<span class="w"> </span>gromacs
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>list
</pre></div>
</div>
</section>
<section id="printing-out-information-about-modules">
<h3>Printing out information about modules<a class="headerlink" href="#printing-out-information-about-modules" title="Permalink to this heading"></a></h3>
<p>There are some different commands to print out information about a specific module. It is worth
giving a try to each of them, the resulting level of detail in the output is different.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span><span class="nb">help</span><span class="w"> </span>gromacs/gcc-4.8.5_ownfftw_2019.1
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>whatis<span class="w"> </span>gromacs/gcc-4.8.5_ownfftw_2019.1
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>show<span class="w"> </span>gromacs
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>spider<span class="w"> </span>gromacs
</pre></div>
</div>
</section>
</section>
<section id="your-own-environment-modules">
<h2>Your own environment modules<a class="headerlink" href="#your-own-environment-modules" title="Permalink to this heading"></a></h2>
<p>Every user can have its own environment modules: private and locally stored in their home directories.</p>
<p>It is suggested that for this purpose, the software to be loaded as modules is placed in your
<code class="docutils literal notranslate"><span class="pre">~/.local/opt/apps</span></code> directory. For example, if you need to install XXX in the version 4.7 create a
directory named:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.local/opt/XXX/4.7
</pre></div>
</div>
<p>And compile there the software. Once the proper compilation was finished, you can store the modulefile with the loading
instructions in the file ‘~/.local/opt/modulefiles/XXX/4.7’. Check the <a class="reference external" href="http://lmod.readthedocs.org">Lmod</a> documentation or the
links a the end of this section.</p>
<p>The directory ‘~/.local/opt/modulefiles’ is checked for environment modules by default for every user. You can check it with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="nv">$MODULEPATH</span>
</pre></div>
</div>
<p>If you want to include other directories with modulefiles include the following line in your ‘~/.bashrc’ file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">MODULEPATH</span><span class="o">=</span><span class="nv">$MODULEPATH</span>:/home/username/path/to/your/modulefiles
</pre></div>
</div>
<p>It is also a strong suggestion that <strong>the user should not keep the source files in the HOME directory</strong>. They are usually
heavy to just store them there not to be used in a long time. Use your WORK directory for this
purpose.</p>
<div class="admonition-more-information admonition">
<p class="admonition-title">More Information</p>
<ul class="simple">
<li><p><a class="reference external" href="http://lmod.readthedocs.org">LMOD documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/TACC/Lmod">LMOD GitHub repository</a></p></li>
<li><p><a class="reference external" href="http://modules.sourceforge.net/">The Environment Modules open source project</a></p></li>
<li><p><a class="reference external" href="http://www.admin-magazine.com/HPC/Articles/Environment-Modules">Article: Environment Modules – A Great Tool for Clusters</a></p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
    <a href="https://github.com/uibcdf/Ixtlilton">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
    </a>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="shell_aliases.html" class="btn btn-neutral float-left" title="Shell aliases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="conda.html" class="btn btn-neutral float-right" title="Conda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, UIBCDF Lab at the Mexico City Childrens Hospital Federico Gomez and the authors..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>